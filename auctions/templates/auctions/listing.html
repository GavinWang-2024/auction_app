{% extends "auctions/layout.html" %}
{% block body %}
    <h2>{{ listingData.title }}</h2>
 
    <p>{{ listingData.description }}</p>

    <p>Owner:{{ listingData.owner }}</p>
    <h6>Price: ${{ listingData.price.bid }}</h6>

    <img class="card-img-top" src="{{ listingData.imageUrl }}" alt="{{ listingData.title }}">

    {% if not listingData.isActive and isWinner %}
        <div class="alert alert-success" role="alert">
            You Won the Auction!
        </div>
    {% endif %}

    {% if user.is_authenticated and listingData.isActive %}
        {% if isOwner %}
            <form action="{% url 'close' id=listingData.id %}" method="POST">
                {% csrf_token %}
                <button type="submit">Close Auction</button>
            </form>
        {% endif %}
        {% if isListingInWatchlist %}
            <form action="{% url 'removeWatchlist' id=listingData.id %}" method="POST">
                {% csrf_token %}
                <button type="submit">Remove From Watchlist</button>
            </form>
        {% else %}
            <form action="{% url 'addWatchlist' id=listingData.id %}" method="POST">
                {% csrf_token %}
                <button type="submit">Add to Watchlist</button>
            </form>
        {% endif %}
        
        <form action="{% url 'addBid' id=listingData.id %}" method="POST">
            {% csrf_token %}
                <label for="price">Add Bid</label>
                <input type="number" min=0 name="newBid" placeholder="Add New Bid">
                <button type="submit" class="btn btn-warning">Add</button>
        </form>
    {% endif %}
{% endblock %}